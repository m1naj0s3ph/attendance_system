<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>ุฅุถุงูุฉ ุทุงูุจ ุฌุฏูุฏ - ูุธุงู ุงูุญุถูุฑ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <!-- ุฒุฑ ูุชุญ ุงูุดุฑูุท ุงูุฌุงูุจู -->
    <button class="menu-toggle" id="menuToggle">
        <i class="fas fa-bars"></i>
    </button>

    <!-- ุงูุดุฑูุท ุงูุฌุงูุจู -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h4>๐ซ ูุธุงู ุงูุญุถูุฑ</h4>
        </div>
        
        <ul class="sidebar-menu">
            <li><a href="/"><i class="fas fa-home"></i> ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ</a></li>
            <li><a href="/daily_report"><i class="fas fa-file-alt"></i> ุงูุชูุฑูุฑ ุงููููู</a></li>
            <li><a href="/admin"><i class="fas fa-chart-bar"></i> ุงูุชูุงุฑูุฑ ุงูุดูุฑูุฉ</a></li>
            <li><a href="/manage_students"><i class="fas fa-users"></i> ุฅุฏุงุฑุฉ ุงูุทูุงุจ</a></li>
            <li><a href="/bulk_grades"><i class="fas fa-tasks"></i> ุชูุฒูุน ุงูุฏุฑุฌุงุช</a></li>
            <li><a href="/add_student" class="active"><i class="fas fa-user-plus"></i> ุฅุถุงูุฉ ุทุงูุจ</a></li>
            <li><a href="/generate_whatsapp_links"><i class="fab fa-whatsapp"></i> ุฑูุงุจุท ูุงุชุณุงุจ</a></li>
            <li><a href="/remote_scanner" target="_blank"><i class="fas fa-camera"></i> ุงููุงุณุญ ุงูุถูุฆู</a></li>
        </ul>
        
        <div class="sidebar-footer">
            <div class="user-info">
                <i class="fas fa-user"></i> {{ username }}
            </div>
            <a href="/logout" class="btn-logout">
                <i class="fas fa-sign-out-alt"></i> ุชุณุฌูู ุงูุฎุฑูุฌ
            </a>
        </div>
    </div>

    <!-- ุงููุญุชูู ุงูุฑุฆูุณู -->
    <div class="main-content">
        <div class="container-box">
            <a href="/admin" class="btn btn-secondary mb-3">
                <i class="fas fa-arrow-right"></i> ุงูุฑุฌูุน ูููุญุฉ ุงูุชุญูู
            </a>
            
            <h2 class="text-center mb-4"><i class="fas fa-user-plus"></i> ุฅุถุงูุฉ ุทุงูุจ ุฌุฏูุฏ</h2>
            
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        <div class="alert alert-{{ category }} fade-in">
                            {{ message }}
                        </div>
                    {% endfor %}
                {% endif %}
            {% endwith %}
            
            <form method="POST" action="/add_student">
                <!-- ูุนูููุงุช ุงูุทุงูุจ ุงูุฃุณุงุณูุฉ -->
                <div class="form-container mb-4">
                    <h4 class="mb-3"><i class="fas fa-user"></i> ูุนูููุงุช ุงูุทุงูุจ</h4>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="student_id" class="form-label">ุฑูู ุงูุทุงูุจ *</label>
                                <input type="text" class="form-control" id="student_id" name="student_id" required placeholder="ุฃุฏุฎู ุฑูู ุงูุทุงูุจ">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="student_name" class="form-label">ุงุณู ุงูุทุงูุจ *</label>
                                <input type="text" class="form-control" id="student_name" name="student_name" required placeholder="ุฃุฏุฎู ุงุณู ุงูุทุงูุจ">
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="parent_number" class="form-label">ุฑูู ููู ุงูุฃูุฑ</label>
                                <input type="text" class="form-control" id="parent_number" name="parent_number" placeholder="ุฃุฏุฎู ุฑูู ููู ุงูุฃูุฑ">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="form-group">
                                <label for="payment_amount" class="form-label">ุฑุณูู ุงูุญุตุฉ (ุฌ.ู)</label>
                                <input type="number" step="0.01" class="form-control" id="payment_amount" name="payment_amount" placeholder="ุฃุฏุฎู ุฑุณูู ุงูุญุตุฉ" value="0">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ูุณู ุฅุถุงูุฉ ุงูุญุตุต -->
                <div class="form-container">
                    <h4 class="mb-3"><i class="fas fa-calendar"></i> ุฅุถุงูุฉ ุงูุญุตุต (ุงุฎุชูุงุฑู)</h4>
                    <div id="classes-container">
                        <div class="class-entry mb-3 p-3 border rounded">
                            <div class="row g-2">
                                <div class="col-md-10">
                                    <label class="form-label">ุงูููู</label>
                                    <select class="form-select" name="day_of_week[]">
                                        <option value="sunday">ุงูุฃุญุฏ</option>
                                        <option value="monday">ุงูุฅุซููู</option>
                                        <option value="tuesday">ุงูุซูุงุซุงุก</option>
                                        <option value="wednesday">ุงูุฃุฑุจุนุงุก</option>
                                        <option value="thursday">ุงูุฎููุณ</option>
                                        <option value="friday">ุงูุฌูุนุฉ</option>
                                        <option value="saturday">ุงูุณุจุช</option>
                                    </select>
                                </div>
                                <div class="col-md-2">
                                    <label class="form-label">&nbsp;</label>
                                    <button type="button" class="btn btn-danger w-100 remove-class" style="display: none;">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-outline-primary" id="add-class">
                        <i class="fas fa-plus"></i> ุฅุถุงูุฉ ุญุตุฉ ุฃุฎุฑู
                    </button>
                </div>
                
                <div class="d-grid gap-2 mt-4">
                    <button type="submit" class="btn btn-primary btn-lg">
                        <i class="fas fa-user-plus"></i> ุฅุถุงูุฉ ุงูุทุงูุจ ูุฅูุดุงุก QR Code
                    </button>
                </div>
            </form>
            
            <div class="alert alert-info mt-4">
                <h5><i class="fas fa-lightbulb"></i> ููุงุญุธุงุช:</h5>
                <ul class="mb-0">
                    <li>ุณูุชู ุฅูุดุงุก QR Code ุชููุงุฆูุงู ููุทุงูุจ ุงูุฌุฏูุฏ</li>
                    <li>ุณูุชู ุญูุธ ุงูุทุงูุจ ูู ููู Excel ุชููุงุฆูุงู</li>
                    <li>ููููู ุฅุถุงูุฉ ุงูุญุตุต ูุงุญูุงู ูู ุฎูุงู ุตูุญุฉ ุฅุฏุงุฑุฉ ุงูุทูุงุจ</li>
                    <li>ูุฅุฏุงุฑุฉ ุฌููุน ุงูุทูุงุจุ ุงูุชูู ุฅูู ุตูุญุฉ "ุฅุฏุงุฑุฉ ุงูุทูุงุจ"</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- ุงูููุชุจุงุช -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>

    <script>
        document.getElementById('add-class').addEventListener('click', function() {
            const container = document.getElementById('classes-container');
            const newClass = container.firstElementChild.cloneNode(true);
            
            newClass.querySelector('.remove-class').style.display = 'block';
            newClass.querySelector('select').selectedIndex = 0;
            
            container.appendChild(newClass);
        });

        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('remove-class')) {
                if (document.querySelectorAll('.class-entry').length > 1) {
                    e.target.closest('.class-entry').remove();
                }
            }
        });
    </script>
</body>
</html>